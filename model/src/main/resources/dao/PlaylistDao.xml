<?xml version="1.0" encoding="UTF-8"?>
<JdbcEntitySetup
 xmlns="http://www.ontimize.com/schema/jdbc"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.ontimize.com/schema/jdbc http://www.ontimize.com/schema/jdbc/ontimize-jdbc-dao.xsd"
 catalog="" schema="${mainschema}" table="playlist"
 datasource="mainDataSource" sqlhandler="dbSQLStatementHandler">
 <DeleteKeys>
  <Column>ID</Column>
 </DeleteKeys>
 <UpdateKeys>
  <Column>ID</Column>
 </UpdateKeys>
 <GeneratedKey>ID</GeneratedKey>
 <Queries>
		<Query id="newestPlaylists">
			<AmbiguousColumns>
				<AmbiguousColumn name="playlist_id" prefix="p"/>
			</AmbiguousColumns>
			<Sentence>
				<![CDATA[
				SELECT
					#COLUMNS#
				FROM
					${mainschema}.PLAYLIST p
				#WHERE#
				
				]]>
			</Sentence>
		</Query>
		<Query id = "playlistSongs">
		<AmbiguousColumns>
			<AmbiguousColumn name="user_id" prefix="u"/>
			<AmbiguousColumn name="song_id" prefix="s"/>
			<AmbiguousColumn name="playlist_id" prefix="p"/>
		</AmbiguousColumns>
		<Sentence>
		<![CDATA[
			SELECT
				#COLUMNS#
			FROM
				${mainschema}.ALBUM a
				INNER JOIN playlist_song pls ON pls.playlist_id = p.playlist_id
				INNER JOIN song s on s.song_id = pls.song_id
				INNER JOIN user u on u.user_id = p.user_id
			#WHERE#
			ORDER BY als.track_number asc
		]]>
		</Sentence>
		</Query>
</Queries>
</JdbcEntitySetup>